(this.webpackJsonptodoapp=this.webpackJsonptodoapp||[]).push([[0],{172:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(27),c=a.n(l),r=(a(89),a(9)),i=a(10),s=a(12),d=a(11),m=a(83),u=a(78),h=a.n(u),p=a(18),g=a(35),f=a.n(g),E=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:null,title:"",due_at:"",editing:!1,startDate:new Date},n.handleChange=function(e){n.setState({title:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.doneEdit()},n.state={id:e.todo.id,title:e.todo.title,due_at:e.todo.due_at,editing:!1},n}return Object(i.a)(a,[{key:"toggleEdit",value:function(){this.setState({editing:!0})}},{key:"doneEdit",value:function(){this.setState({editing:!1}),this.props.editTodo(this.state)}},{key:"render",value:function(){var e=this,t=this.props,a=t.todo,n=t.markTodo,l=t.deleteTodo,c=f()().format("YYYY-MM-DD HH:mm:ss");return o.a.createElement("li",{className:"collection-item avatar"},o.a.createElement("label",{className:"circle"},o.a.createElement("input",{type:"checkbox",className:"",checked:"Completed"===a.status?"checked":"",onChange:function(){return n(a)}}),o.a.createElement("span",null)),this.state.editing?o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",onChange:this.handleChange,onBlur:function(){return e.doneEdit()},value:this.state.title})):o.a.createElement("p",{className:"title "+("Completed"===a.status?"completed":""),onDoubleClick:function(){return e.toggleEdit()}},this.state.title),o.a.createElement("p",{className:"grey-text text-darken-1"},a.description),a.due_at?o.a.createElement("button",{className:"datetime waves-effect waves-light btn grey lighten-4 btn-flat "+(a.due_at<c?"red-text text-darken-1":"teal-text")},o.a.createElement("i",{className:"material-icons left"},"today"),o.a.createElement(h.a,{className:"grey-text text-darken-2",calendar:{lastDay:"[Yesterday]",sameDay:"[Today,] LT",nextDay:"[Tomorrow,] LT",lastWeek:"[last] dddd",nextWeek:"dddd[,] LT ",sameElse:"L, LT"}},a.due_at)):"",o.a.createElement("i",{className:"delete-btn secondary-content small material-icons red-text text-lighten-2 right",onClick:function(){return l(a.id)}},"delete_forever"),o.a.createElement(p.b,{to:"/todos/edit/"+a.id,className:"edit-btn small material-icons grey-text right"},"edit"))}}]),a}(n.Component),v=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={title:""},e.handleChange=function(t){e.setState({title:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.addTodo(e.state),e.setState({title:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Add New Todo:"),o.a.createElement("input",{type:"text",onChange:this.handleChange,value:this.state.title})))}}]),a}(n.Component),b=a(13),N=a(8),k=a.n(N),y=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={todos:[]},n.markTodo=function(e){var t="Active"===e.status?"Completed":"Active";k.a.patch("/todos/"+e.id,{status:t}).then((function(a){n.setState({todos:n.state.todos.map((function(a){return a.id===e.id&&(a.status=t),a}))})})).catch((function(e){console.log(e)}))},n.editTodo=function(e){console.log(e),k.a.patch("/todos/"+e.id,{title:e.title}).then((function(t){n.setState({todos:n.state.todos.map((function(t){return t.id===e.id&&(t.title=e.title),t}))})})).catch((function(e){console.log(e)}))},n.deleteTodo=function(e){k.a.delete("/todos/"+e).then((function(t){n.setState({todos:n.state.todos.filter((function(t){return t.id!==e}))})})).catch((function(e){console.log(e)}))},n.addTodo=function(e){k.a.post("/todos/",{title:e.title}).then((function(e){var t=[].concat(Object(m.a)(n.state.todos),[e.data]);n.setState({todos:t})})).catch((function(e){console.log(e)}))},k.a.defaults.headers.common.Authorization="Bearer "+e.token,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.a.get("/todos/").then((function(t){e.setState({todos:t.data.filter((function(e){return"Deleted"!==e.status}))})})).catch((function(e){console.log(e)})),k.a.get("/user").then((function(t){e.props.setUser(t.data.name)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.todos.length?this.state.todos.map((function(t){return o.a.createElement(E,{todo:t,key:t.id,markTodo:e.markTodo,editTodo:e.editTodo,deleteTodo:e.deleteTodo})})):o.a.createElement("p",{className:"center"},"You have no Todos");return o.a.createElement("ul",{className:"todos collection"},o.a.createElement(v,{addTodo:this.addTodo}),t)}}]),a}(n.Component),O=Object(b.b)((function(e){return{token:e.token}}),(function(e){return{setUser:function(t){e(function(e){return{type:"SET_USER",user:e}}(t))}}}))(y),T=a(7),w=Object(b.b)((function(e){return{isLoggedIn:e.isLoggedIn,token:e.token,user:e.user}}))(Object(T.g)((function(e){var t=e.isLoggedIn,a=e.user;return o.a.createElement("nav",null,o.a.createElement("div",{className:"nav-wrapper teal lighten-1"},o.a.createElement(p.c,{to:"/",className:"brand-logo"},"React Lumen Todo"),t?o.a.createElement("ul",{id:"nav-mobile",className:"right"},o.a.createElement("li",null,"Welcome, ",a),o.a.createElement("li",null,o.a.createElement(p.c,{to:"/Todos"},"Todos")),o.a.createElement("li",null,o.a.createElement(p.c,{to:"/logout"},"Logout"))):o.a.createElement("ul",{id:"nav-mobile",className:"right"},o.a.createElement("li",null,o.a.createElement(p.c,{to:"/login"},"Login")),o.a.createElement("li",null,o.a.createElement(p.c,{to:"/register"},"Register")))))}))),j=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).login=function(t){t.preventDefault();var a=t.target.username.value,n=t.target.password.value,o="";k.a.post("/oauth/token/",{grant_type:"password",client_id:2,client_secret:"oVt1470lwqJGaOOk4EFOYtJid0qsa7VIgAoG5iL5",username:a,password:n}).then((function(t){o=t.data.access_token,e.props.setToken(o),e.props.history.push("/todos")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h4",{className:"center"},"Login"),o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col s12",onSubmit:this.login},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"username",type:"email",className:"validate"}),o.a.createElement("label",{htmlFor:"username"},"Email"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"password",type:"password",className:"validate"}),o.a.createElement("label",{htmlFor:"password"},"Password"))),o.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Login",o.a.createElement("i",{className:"material-icons right"})))))}}]),a}(n.Component),S=Object(b.b)((function(e){return{token:e.token}}),(function(e){return{setToken:function(t){e(function(e){return{type:"SET_TOKEN",token:e}}(t))}}}))(j),_=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).register=function(t){t.preventDefault();var a=t.target.name.value,n=t.target.email.value,o=t.target.password.value;k.a.post("/register",{name:a,email:n,password:o}).then((function(t){e.props.history.push("/login")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h4",{className:"center"},"Register"),o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col s12",onSubmit:this.register},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"name",type:"text",className:"validate"}),o.a.createElement("label",{htmlFor:"name"},"Name"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"email",type:"email",className:"validate"}),o.a.createElement("label",{htmlFor:"email"},"Email"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"password",type:"password",className:"validate"}),o.a.createElement("label",{htmlFor:"password"},"Password"))),o.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action"},"Create Account",o.a.createElement("i",{className:"material-icons right"})))))}}]),a}(n.Component),D=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props;k.a.post("/logout","",{headers:{Authorization:"Bearer ".concat(this.props.token)}}).then((function(t){e.destroyToken()})).catch((function(t){console.log(t),e.destroyToken()}))}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),a}(n.Component),C=Object(b.b)((function(e){return{token:e.token}}),(function(e){return{destroyToken:function(){e({type:"DESTROY_TOKEN"})}}}))(D),x=a(80),L=a.n(x),I=(a(113),function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={id:n.props.match.params.todo_id,title:"",description:null,due_at:null},n.editTodo=function(e){e.preventDefault(),k.a.patch("/todos/"+n.state.id,{title:n.state.title,description:n.state.description,due_at:n.state.due_at}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},n.changeDate=function(e){var t=f()(e).format("YYYY-MM-DD HH:mm:ss");n.setState({due_at:t})},n.changeTitle=function(e){n.setState({title:e.target.value})},n.changeDescription=function(e){n.setState({description:e.target.value})},k.a.defaults.headers.common.Authorization="Bearer "+e.token,n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.state.id;k.a.get("/todos/"+t).then((function(t){console.log(t.data),e.setState({id:t.data.id,title:t.data.title,description:t.data.description,due_at:t.data.due_at})})).catch((function(e){console.log(e)}))}},{key:"deleteDate",value:function(){this.setState({due_at:null})}},{key:"render",value:function(){var e=this,t=this.state.title?o.a.createElement("div",null,o.a.createElement("div",{className:"section"},o.a.createElement(p.b,{to:"/todos/"},o.a.createElement("i",{className:"medium material-icons grey-text left"},"arrow_back"))),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col s12",onSubmit:this.editTodo},o.a.createElement("h4",{className:"center"},"Todo Item"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"title",type:"text",className:"validate",onChange:this.changeTitle,value:this.state.title}),o.a.createElement("label",{htmlFor:"title",className:"active"},"Title"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"description",type:"text",className:"validate",onChange:this.changeDescription,value:this.state.description?this.state.description:""}),o.a.createElement("label",{htmlFor:"description",className:this.state.description?"active":""},"Description"))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement(L.a,{selected:this.state.due_at?new Date(this.state.due_at):"",onChange:function(t){return e.changeDate(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:30,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa",placeholderText:"Add date/time"}),this.state.due_at?o.a.createElement("i",{className:"deletedate-btn small material-icons prefix red-text text-lighten-2 ",onClick:function(){return e.deleteDate()}},"close"):"")),o.a.createElement("button",{className:"btn waves-effect waves-light",onClick:this.editTodo},"Update",o.a.createElement("i",{className:"material-icons right"})))))):o.a.createElement("div",{className:"center"},"Loading post...");return o.a.createElement("div",{className:"container"},t)}}]),a}(n.Component)),A=Object(b.b)((function(e){return{token:e.token}}))(I),Y=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),k.a.defaults.baseURL="http://localhost:8000",n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.isLoggedIn;return o.a.createElement(p.a,null,o.a.createElement("div",{className:"App container"},o.a.createElement(w,null),o.a.createElement(T.d,null,o.a.createElement(T.b,{exact:!0,path:"/"}," ",e?o.a.createElement(T.a,{to:"/todos"}):o.a.createElement(T.a,{to:"/login"})),o.a.createElement(T.b,{exact:!0,path:"/todos"}," ",e?o.a.createElement(O,null):o.a.createElement(T.a,{to:"/login"})),o.a.createElement(T.b,{path:"/todos/edit/:todo_id",component:e?A:S}),o.a.createElement(T.b,{path:"/login"}," ",e?o.a.createElement(T.a,{to:"/todos"}):o.a.createElement(S,null)),o.a.createElement(T.b,{path:"/logout"}," ",e?o.a.createElement(C,null):o.a.createElement(T.a,{to:"/login"})),o.a.createElement(T.b,{path:"/register",component:_}))))}}]),a}(n.Component),M=Object(b.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(40),U=a(25),R={token:localStorage.getItem("access_token")||null,isLoggedIn:localStorage.getItem("isLoggedIn")||!1,loggedUser:localStorage.getItem("loggedUser")||null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;if("SET_TOKEN"===t.type)return localStorage.setItem("access_token",t.token),localStorage.setItem("isLoggedIn",!0),Object(U.a)(Object(U.a)({},e),{},{token:t.token,isLoggedIn:!0});if("SET_USER"===t.type)return localStorage.setItem("access_token",t.user),Object(U.a)(Object(U.a)({},e),{},{user:t.user});if("DESTROY_TOKEN"===t.type)return localStorage.removeItem("access_token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("loggedUser"),Object(U.a)(Object(U.a)({},e),{},{token:null,isLoggedIn:!1,loggedUser:null});if("DELETE_POST"===t.type){var a=e.posts.filter((function(e){return e.id!==t.id}));return Object(U.a)(Object(U.a)({},e),{},{posts:a})}return e},H=Object(F.b)(B);c.a.render(o.a.createElement(b.a,{store:H},o.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,a){e.exports=a(172)},89:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.560d7f9f.chunk.js.map