{"ast":null,"code":"import _toConsumableArray from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Todo from'./Todo';import AddTodo from'./AddTodo';import{connect}from'react-redux';import axios from'axios';import{setUser as _setUser}from'../actions/authActions';var Todos=/*#__PURE__*/function(_Component){_inherits(Todos,_Component);var _super=_createSuper(Todos);function Todos(props){var _this;_classCallCheck(this,Todos);_this=_super.call(this,props);_this.state={todos:[]};_this.markTodo=function(todo){var status=todo.status===\"Active\"?\"Completed\":\"Active\";axios.patch('/todos/'+todo.id,{status:status}).then(function(res){_this.setState({todos:_this.state.todos.map(function(stateTodo){if(stateTodo.id===todo.id)stateTodo.status=status;return stateTodo;})});}).catch(function(error){console.log(error);});};_this.editTodo=function(todo){console.log(todo);axios.patch('/todos/'+todo.id,{title:todo.title}).then(function(res){_this.setState({todos:_this.state.todos.map(function(stateTodo){if(stateTodo.id===todo.id){stateTodo.title=todo.title;}return stateTodo;})});}).catch(function(error){console.log(error);});};_this.deleteTodo=function(id){axios.delete('/todos/'+id).then(function(res){_this.setState({todos:_this.state.todos.filter(function(todo){return todo.id!==id;})});}).catch(function(error){console.log(error);});};_this.addTodo=function(todo){axios.post('/todos/',{title:todo.title}).then(function(res){var todos=[].concat(_toConsumableArray(_this.state.todos),[res.data]);_this.setState({todos:todos});}).catch(function(error){console.log(error);});};axios.defaults.headers.common['Authorization']='Bearer '+props.token;return _this;}_createClass(Todos,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/todos/').then(function(res){_this2.setState({todos:res.data.filter(function(todo){return todo.status!=='Deleted';})});}).catch(function(error){console.log(error);});axios.get('/user').then(function(res){_this2.props.setUser(res.data.name);}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){var _this3=this;var todoList=this.state.todos.length?this.state.todos.map(function(todo){return/*#__PURE__*/React.createElement(Todo,{todo:todo,key:todo.id,markTodo:_this3.markTodo,editTodo:_this3.editTodo,deleteTodo:_this3.deleteTodo});}):/*#__PURE__*/React.createElement(\"p\",{className:\"center\"},\"You have no Todos\");return/*#__PURE__*/React.createElement(\"ul\",{className:\"todos collection\"},/*#__PURE__*/React.createElement(AddTodo,{addTodo:this.addTodo}),todoList);}}]);return Todos;}(Component);var mapStateToProps=function mapStateToProps(state){return{token:state.token};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setUser:function setUser(user){dispatch(_setUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(Todos);","map":{"version":3,"sources":["C:/xampp/htdocs/react-lumen-todos/client/src/components/Todos.js"],"names":["React","Component","Todo","AddTodo","connect","axios","setUser","Todos","props","state","todos","markTodo","todo","status","patch","id","then","res","setState","map","stateTodo","catch","error","console","log","editTodo","title","deleteTodo","delete","filter","addTodo","post","data","defaults","headers","common","token","get","name","todoList","length","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Todo from './Todo'\r\nimport AddTodo from './AddTodo'\r\nimport {connect} from 'react-redux';\r\nimport axios from 'axios'\r\nimport { setUser } from '../actions/authActions'\r\n\r\n\r\n\r\nclass Todos extends Component {\r\n    state = {\r\n        todos: [\r\n          ]\r\n    };\r\n\r\n    constructor(props) {\r\n      super(props);\r\n      axios.defaults.headers.common['Authorization'] = 'Bearer '+ props.token;\r\n    }\r\n\r\n    componentDidMount(){\r\n        axios.get('/todos/')\r\n        .then(res => {\r\n            this.setState({\r\n                todos: res.data.filter(todo => {\r\n                  return (todo.status !== 'Deleted')\r\n                })\r\n            })\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        })\r\n\r\n        axios.get('/user')\r\n        .then(res => {\r\n          this.props.setUser(res.data.name);\r\n           \r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        })\r\n\r\n\r\n      } \r\n\r\n      markTodo = (todo) =>{\r\n        const status = (todo.status === \"Active\" ? \"Completed\" : \"Active\");\r\n        axios.patch('/todos/'+todo.id, {\r\n            status\r\n          })\r\n          .then(res => {\r\n            this.setState({\r\n                todos: this.state.todos.map(stateTodo => {\r\n                  if (stateTodo.id === todo.id)\r\n                      stateTodo.status = status;\r\n                  \r\n                  return stateTodo;\r\n                })\r\n              })\r\n          })\r\n          .catch(error => {\r\n            console.log(error);\r\n          })\r\n      }\r\n    \r\n      editTodo = (todo) =>{ \r\n        console.log(todo)\r\n        axios.patch('/todos/'+todo.id, {\r\n          title: todo.title,\r\n        })\r\n        .then(res => {\r\n            this.setState({\r\n                todos: this.state.todos.map(stateTodo => {\r\n                  if (stateTodo.id === todo.id){\r\n                  stateTodo.title = todo.title;\r\n                }\r\n                return stateTodo;\r\n                })\r\n              })\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        })\r\n      }\r\n    \r\n      deleteTodo = (id) =>{\r\n        axios.delete('/todos/'+id)\r\n          .then(res => {\r\n              this.setState({\r\n                  todos: this.state.todos.filter(todo => {\r\n                    return (todo.id !== id)\r\n                  })\r\n                })\r\n          })\r\n          .catch(error => {\r\n            console.log(error);\r\n          })\r\n      }\r\n    \r\n      addTodo = (todo) => {\r\n        axios.post('/todos/', {\r\n          title: todo.title,\r\n        })\r\n        .then(res => {\r\n          let todos = [...this.state.todos, res.data]\r\n          this.setState({\r\n            todos\r\n          })\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        })\r\n      }\r\n      \r\n    render(){\r\n        const todoList = this.state.todos.length ? (\r\n            this.state.todos.map(todo => {\r\n                return (\r\n                    <Todo todo={todo} key={todo.id} markTodo={this.markTodo} editTodo={this.editTodo} deleteTodo={this.deleteTodo}/>\r\n                )\r\n            })\r\n        ) : (\r\n            <p className=\"center\">You have no Todos</p>\r\n        );\r\n\r\n        return (\r\n                <ul className=\"todos collection\">\r\n                    <AddTodo addTodo={this.addTodo}/>\r\n\r\n                    {todoList}\r\n                </ul>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n      token: state.token\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n      setUser: (user) => { dispatch(setUser(user))},\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Todos)"]},"metadata":{},"sourceType":"module"}