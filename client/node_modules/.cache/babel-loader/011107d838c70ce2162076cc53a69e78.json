{"ast":null,"code":"import axios from 'axios';\nconst initState = {\n  token: null,\n  posts: [{\n    id: 1,\n    title: \"Buy Milk 1\",\n    body: \"I am a very simple card. I am good at containing small bits of information.\"\n  }, {\n    id: 2,\n    title: \"Buy Milk 2\",\n    body: \"I am a very simple card. I am good at containing small bits of information.\"\n  }, {\n    id: 3,\n    title: \"Buy Milk 3\",\n    body: \"I am a very simple card. I am good at containing small bits of information.\"\n  }, {\n    id: 4,\n    title: \"Buy Milk 4\",\n    body: \"I am a very simple card. I am good at containing small bits of information.\"\n  }]\n};\n\nconst rootReducer = (state = initState, action) => {\n  if (action.type === 'GET_TOKEN') {\n    let token = \"\";\n    axios.post('/oauth/token/', {\n      grant_type: 'password',\n      client_id: 2,\n      client_secret: 'NFAjDhC2pruCS3d9W2Ewfggavr5lsKFLbSyrSJrs',\n      username: action.username,\n      password: action.password\n    }).then(res => {\n      token = res.data.access_token;\n      console.log(token);\n      localStorage.setItem('access_token', token);\n      return { ...state,\n        token: token\n      };\n    }).catch(error => {\n      console.log(error);\n    });\n  } else if (action.type === 'DELETE_POST') {\n    let newPosts = state.posts.filter(post => post.id !== action.id);\n    return { ...state,\n      posts: newPosts\n    };\n  }\n\n  return state;\n};\n\nexport default rootReducer;","map":{"version":3,"sources":["C:/xampp/htdocs/react_api_todo/todoapp/src/reducers/rootReducer.js"],"names":["axios","initState","token","posts","id","title","body","rootReducer","state","action","type","post","grant_type","client_id","client_secret","username","password","then","res","data","access_token","console","log","localStorage","setItem","catch","error","newPosts","filter"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,SAAS,GAAG;AACdC,EAAAA,KAAK,EAAE,IADO;AAEdC,EAAAA,KAAK,EAAE,CACC;AAACC,IAAAA,EAAE,EAAE,CAAL;AAAQC,IAAAA,KAAK,EAAE,YAAf;AAA6BC,IAAAA,IAAI,EAAE;AAAnC,GADD,EAEC;AAACF,IAAAA,EAAE,EAAE,CAAL;AAAQC,IAAAA,KAAK,EAAE,YAAf;AAA6BC,IAAAA,IAAI,EAAE;AAAnC,GAFD,EAGC;AAACF,IAAAA,EAAE,EAAE,CAAL;AAAQC,IAAAA,KAAK,EAAE,YAAf;AAA6BC,IAAAA,IAAI,EAAE;AAAnC,GAHD,EAIC;AAACF,IAAAA,EAAE,EAAE,CAAL;AAAQC,IAAAA,KAAK,EAAE,YAAf;AAA6BC,IAAAA,IAAI,EAAE;AAAnC,GAJD;AAFO,CAAlB;;AASA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGP,SAAT,EAAoBQ,MAApB,KAA+B;AAC/C,MAAGA,MAAM,CAACC,IAAP,KAAgB,WAAnB,EAAgC;AAC5B,QAAIR,KAAK,GAAG,EAAZ;AACAF,IAAAA,KAAK,CAACW,IAAN,CAAW,eAAX,EAA4B;AACxBC,MAAAA,UAAU,EAAE,UADY;AAExBC,MAAAA,SAAS,EAAE,CAFa;AAGxBC,MAAAA,aAAa,EAAE,0CAHS;AAIxBC,MAAAA,QAAQ,EAAEN,MAAM,CAACM,QAJO;AAKxBC,MAAAA,QAAQ,EAAEP,MAAM,CAACO;AALO,KAA5B,EAOGC,IAPH,CAOQC,GAAG,IAAI;AACXhB,MAAAA,KAAK,GAAGgB,GAAG,CAACC,IAAJ,CAASC,YAAjB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYpB,KAAZ;AACAqB,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCtB,KAArC;AACA,aAAQ,EACJ,GAAGM,KADC;AAEJN,QAAAA,KAAK,EAAEA;AAFH,OAAR;AAID,KAfH,EAgBGuB,KAhBH,CAgBSC,KAAK,IAAI;AACdL,MAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AACD,KAlBH;AAqBH,GAvBD,MAwBK,IAAGjB,MAAM,CAACC,IAAP,KAAgB,aAAnB,EAAkC;AACnC,QAAIiB,QAAQ,GAAGnB,KAAK,CAACL,KAAN,CAAYyB,MAAZ,CAAmBjB,IAAI,IAAIA,IAAI,CAACP,EAAL,KAAYK,MAAM,CAACL,EAA9C,CAAf;AAEA,WAAO,EACH,GAAGI,KADA;AAEHL,MAAAA,KAAK,EAAEwB;AAFJ,KAAP;AAIH;;AAED,SAAOnB,KAAP;AACH,CAnCD;;AAqCA,eAAeD,WAAf","sourcesContent":["import axios from 'axios';\r\n\r\nconst initState = {\r\n    token: null,\r\n    posts: [\r\n            {id: 1, title: \"Buy Milk 1\", body: \"I am a very simple card. I am good at containing small bits of information.\"},\r\n            {id: 2, title: \"Buy Milk 2\", body: \"I am a very simple card. I am good at containing small bits of information.\"},\r\n            {id: 3, title: \"Buy Milk 3\", body: \"I am a very simple card. I am good at containing small bits of information.\"},\r\n            {id: 4, title: \"Buy Milk 4\", body: \"I am a very simple card. I am good at containing small bits of information.\"},\r\n    ]\r\n}\r\nconst rootReducer = (state = initState, action) => {\r\n    if(action.type === 'GET_TOKEN') {\r\n        let token = \"\"\r\n        axios.post('/oauth/token/', {\r\n            grant_type: 'password',\r\n            client_id: 2,\r\n            client_secret: 'NFAjDhC2pruCS3d9W2Ewfggavr5lsKFLbSyrSJrs',\r\n            username: action.username,\r\n            password: action.password\r\n          })\r\n          .then(res => {\r\n            token = res.data.access_token;\r\n            console.log(token)\r\n            localStorage.setItem('access_token', token)\r\n            return  {\r\n                ...state,\r\n                token: token\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.log(error);\r\n          })\r\n        \r\n       \r\n    }\r\n    else if(action.type === 'DELETE_POST') {\r\n        let newPosts = state.posts.filter(post => post.id !== action.id);\r\n\r\n        return {\r\n            ...state,\r\n            posts: newPosts\r\n        }\r\n    }    \r\n\r\n    return state;\r\n}\r\n\r\nexport default rootReducer"]},"metadata":{},"sourceType":"module"}