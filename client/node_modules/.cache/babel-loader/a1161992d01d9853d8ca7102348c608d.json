{"ast":null,"code":"import _classCallCheck from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\xampp\\\\htdocs\\\\react-lumen-todos\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import moment from'moment';import{Link}from'react-router-dom';import{connect}from'react-redux';import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";var EditTodo=/*#__PURE__*/function(_Component){_inherits(EditTodo,_Component);var _super=_createSuper(EditTodo);function EditTodo(props){var _this;_classCallCheck(this,EditTodo);_this=_super.call(this,props);_this.state={id:_this.props.match.params.todo_id,title:\"\",description:null,due_at:null};_this.editTodo=function(e){e.preventDefault();axios.patch('/todos/'+_this.state.id,{title:_this.state.title,description:_this.state.description,due_at:_this.state.due_at}).then(function(res){console.log(res);}).catch(function(error){console.log(error);});};_this.changeDate=function(date){var due_date=moment(date).format('YYYY-MM-DD HH:mm:ss');_this.setState({due_at:due_date});};_this.changeTitle=function(e){_this.setState({title:e.target.value});};_this.changeDescription=function(e){_this.setState({description:e.target.value});};axios.defaults.headers.common['Authorization']='Bearer '+props.token;return _this;}_createClass(EditTodo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.state.id;axios.get('/todos/'+id).then(function(res){console.log(res.data);_this2.setState({id:res.data.id,title:res.data.title,description:res.data.description,due_at:res.data.due_at});}).catch(function(error){console.log(error);});}},{key:\"deleteDate\",value:function deleteDate(){this.setState({due_at:null});}},{key:\"render\",value:function render(){var _this3=this;var todo=this.state.title?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"section\"},/*#__PURE__*/React.createElement(Link,{to:\"/todos/\"},/*#__PURE__*/React.createElement(\"i\",{className:\"medium material-icons grey-text left\"},\"arrow_back\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"form\",{className:\"col s12\",onSubmit:this.editTodo},/*#__PURE__*/React.createElement(\"h4\",{className:\"center\"},\"Todo Item\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"input\",{id:\"title\",type:\"text\",className:\"validate\",onChange:this.changeTitle,value:this.state.title}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"title\",className:\"active\"},\"Title\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"input\",{id:\"description\",type:\"text\",className:\"validate\",onChange:this.changeDescription,value:this.state.description?this.state.description:\"\"}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\",className:this.state.description?\"active\":\"\"},\"Description\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(DatePicker,{selected:this.state.due_at?new Date(this.state.due_at):\"\",onChange:function onChange(date){return _this3.changeDate(date);}// customInput={<ExampleCustomInput />}\n,showTimeSelect:true,timeFormat:\"HH:mm\",timeIntervals:30,timeCaption:\"time\",dateFormat:\"MMMM d, yyyy h:mm aa\",placeholderText:\"Add date/time\"}),this.state.due_at?/*#__PURE__*/React.createElement(\"i\",{className:\"deletedate-btn small material-icons prefix red-text text-lighten-2 \",onClick:function onClick(){return _this3.deleteDate();}},\"close\"):\"\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn waves-effect waves-light\",onClick:this.editTodo},\"Update\",/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons right\"})))))):/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},\"Loading post...\");return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},todo);}}]);return EditTodo;}(Component);var mapStateToProps=function mapStateToProps(state){return{token:state.token};};export default connect(mapStateToProps)(EditTodo);","map":{"version":3,"sources":["C:/xampp/htdocs/react-lumen-todos/client/src/components/EditTodo.js"],"names":["React","Component","axios","moment","Link","connect","DatePicker","EditTodo","props","state","id","match","params","todo_id","title","description","due_at","editTodo","e","preventDefault","patch","then","res","console","log","catch","error","changeDate","date","due_date","format","setState","changeTitle","target","value","changeDescription","defaults","headers","common","token","get","data","todo","Date","deleteDate","mapStateToProps"],"mappings":"gpBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CAGA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,MAAO,4CAAP,C,GAEMC,CAAAA,Q,oGAQF,kBAAYC,KAAZ,CAAmB,0CACf,uBAAMA,KAAN,EADe,MAPnBC,KAOmB,CAPX,CACJC,EAAE,CAAE,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBC,OADxB,CAEJC,KAAK,CAAE,EAFH,CAGJC,WAAW,CAAE,IAHT,CAIJC,MAAM,CAAE,IAJJ,CAOW,OAsBnBC,QAtBmB,CAsBR,SAACC,CAAD,CAAO,CACdA,CAAC,CAACC,cAAF,GACAjB,KAAK,CAACkB,KAAN,CAAY,UAAU,MAAKX,KAAL,CAAWC,EAAjC,CAAqC,CACjCI,KAAK,CAAE,MAAKL,KAAL,CAAWK,KADe,CAEjCC,WAAW,CAAE,MAAKN,KAAL,CAAWM,WAFS,CAGjCC,MAAM,CAAE,MAAKP,KAAL,CAAWO,MAHc,CAArC,EAKCK,IALD,CAKM,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAPD,EAQCG,KARD,CAQO,SAAAC,KAAK,CAAI,CACZH,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACD,CAVH,EAWH,CAnCkB,OAoCnBC,UApCmB,CAoCN,SAACC,IAAD,CAAU,CACnB,GAAIC,CAAAA,QAAQ,CAAG1B,MAAM,CAACyB,IAAD,CAAN,CAAaE,MAAb,CAAoB,qBAApB,CAAf,CACA,MAAKC,QAAL,CAAc,CACVf,MAAM,CAAEa,QADE,CAAd,EAGH,CAzCkB,OA0CnBG,WA1CmB,CA0CL,SAACd,CAAD,CAAO,CACjB,MAAKa,QAAL,CAAc,CACVjB,KAAK,CAAEI,CAAC,CAACe,MAAF,CAASC,KADN,CAAd,EAGH,CA9CkB,OA+CnBC,iBA/CmB,CA+CC,SAACjB,CAAD,CAAO,CACvB,MAAKa,QAAL,CAAc,CACVhB,WAAW,CAAEG,CAAC,CAACe,MAAF,CAASC,KADZ,CAAd,EAGH,CAnDkB,CAEfhC,KAAK,CAACkC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,EAAiD,UAAW9B,KAAK,CAAC+B,KAAlE,CAFe,aAGhB,C,kFAEgB,iBACf,GAAI7B,CAAAA,EAAE,CAAG,KAAKD,KAAL,CAAWC,EAApB,CACAR,KAAK,CAACsC,GAAN,CAAU,UAAU9B,EAApB,EACCW,IADD,CACM,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACmB,IAAhB,EACA,MAAI,CAACV,QAAL,CAAc,CACVrB,EAAE,CAAEY,GAAG,CAACmB,IAAJ,CAAS/B,EADH,CAEVI,KAAK,CAAEQ,GAAG,CAACmB,IAAJ,CAAS3B,KAFN,CAGVC,WAAW,CAAEO,GAAG,CAACmB,IAAJ,CAAS1B,WAHZ,CAIVC,MAAM,CAAEM,GAAG,CAACmB,IAAJ,CAASzB,MAJP,CAAd,EAMH,CATD,EAUCS,KAVD,CAUO,SAAAC,KAAK,CAAI,CACZH,OAAO,CAACC,GAAR,CAAYE,KAAZ,EACD,CAZH,EAaH,C,+CAgCW,CACR,KAAKK,QAAL,CAAc,CACVf,MAAM,CAAE,IADE,CAAd,EAGH,C,uCACO,iBAEJ,GAAM0B,CAAAA,IAAI,CAAG,KAAKjC,KAAL,CAAWK,KAAX,cACT,4CACI,2BAAK,SAAS,CAAC,SAAf,eACA,oBAAC,IAAD,EAAM,EAAE,CAAE,SAAV,eAAqB,yBAAG,SAAS,CAAC,sCAAb,eAArB,CADA,CADJ,cAII,2BAAK,SAAS,CAAC,WAAf,eAEI,2BAAK,SAAS,CAAC,KAAf,eACI,4BAAM,SAAS,CAAC,SAAhB,CAA0B,QAAQ,CAAE,KAAKG,QAAzC,eACA,0BAAI,SAAS,CAAC,QAAd,cADA,cAEA,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,qBAAf,eACA,6BAAO,EAAE,CAAC,OAAV,CAAkB,IAAI,CAAC,MAAvB,CAA8B,SAAS,CAAC,UAAxC,CAAmD,QAAQ,CAAE,KAAKe,WAAlE,CAA+E,KAAK,CAAE,KAAKvB,KAAL,CAAWK,KAAjG,EADA,cAEA,6BAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,QAAjC,UAFA,CADJ,CAFA,cAQA,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,qBAAf,eACA,6BAAO,EAAE,CAAC,aAAV,CAAwB,IAAI,CAAC,MAA7B,CAAoC,SAAS,CAAC,UAA9C,CAAyD,QAAQ,CAAE,KAAKqB,iBAAxE,CAA2F,KAAK,CAAE,KAAK1B,KAAL,CAAWM,WAAX,CAAyB,KAAKN,KAAL,CAAWM,WAApC,CAAkD,EAApJ,EADA,cAEA,6BAAO,OAAO,CAAC,aAAf,CAA6B,SAAS,CAAG,KAAKN,KAAL,CAAWM,WAAX,CAAyB,QAAzB,CAAoC,EAA7E,gBAFA,CADJ,CARA,cAeA,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,qBAAf,eACI,oBAAC,UAAD,EACI,QAAQ,CAAE,KAAKN,KAAL,CAAWO,MAAX,CAAoB,GAAI2B,CAAAA,IAAJ,CAAS,KAAKlC,KAAL,CAAWO,MAApB,CAApB,CAAkD,EADhE,CAEI,QAAQ,CAAE,kBAAAY,IAAI,QAAI,CAAA,MAAI,CAACD,UAAL,CAAgBC,IAAhB,CAAJ,EACd;AAHJ,CAII,cAAc,KAJlB,CAKI,UAAU,CAAC,OALf,CAMI,aAAa,CAAE,EANnB,CAOI,WAAW,CAAC,MAPhB,CAQI,UAAU,CAAC,sBARf,CASI,eAAe,CAAC,eATpB,EADJ,CAYK,KAAKnB,KAAL,CAAWO,MAAX,cAAoB,yBAAG,SAAS,CAAC,qEAAb,CAAmF,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC4B,UAAL,EAAN,EAA5F,UAApB,CAAqJ,EAZ1J,CADJ,CAfA,cAgCA,8BAAQ,SAAS,CAAC,8BAAlB,CAAiD,OAAO,CAAE,KAAK3B,QAA/D,wBACI,yBAAG,SAAS,CAAC,sBAAb,EADJ,CAhCA,CADJ,CAFJ,CAJJ,CADS,cAkDZ,2BAAK,SAAS,CAAC,QAAf,oBAlDD,CAoDA,mBACI,2BAAK,SAAS,CAAC,WAAf,EACIyB,IADJ,CADJ,CAKH,C,sBA5HkBzC,S,EAgIvB,GAAM4C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACpC,KAAD,CAAW,CAC/B,MAAO,CACH8B,KAAK,CAAE9B,KAAK,CAAC8B,KADV,CAAP,CAGD,CAJH,CAME,cAAelC,CAAAA,OAAO,CAACwC,eAAD,CAAP,CAAyBtC,QAAzB,CAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport { Link } from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\n\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nclass EditTodo extends Component {\r\n    state = {\r\n        id: this.props.match.params.todo_id,\r\n        title: \"\",\r\n        description: null,\r\n        due_at: null,\r\n    };\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        axios.defaults.headers.common['Authorization'] = 'Bearer '+ props.token;\r\n      }\r\n  \r\n    componentDidMount(){\r\n        let id = this.state.id;\r\n        axios.get('/todos/'+id)\r\n        .then(res => {\r\n            console.log(res.data)\r\n            this.setState({\r\n                id: res.data.id,\r\n                title: res.data.title,\r\n                description: res.data.description,\r\n                due_at: res.data.due_at,\r\n            })\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n          })\r\n    }\r\n\r\n    editTodo = (e) => {\r\n        e.preventDefault();\r\n        axios.patch('/todos/'+this.state.id, {\r\n            title: this.state.title,\r\n            description: this.state.description,\r\n            due_at: this.state.due_at\r\n        })\r\n        .then(res => {\r\n            console.log(res)\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n          })\r\n    }\r\n    changeDate = (date) => {\r\n        var due_date = moment(date).format('YYYY-MM-DD HH:mm:ss');            \r\n        this.setState({\r\n            due_at: due_date\r\n        })\r\n    }\r\n    changeTitle = (e) => {\r\n        this.setState({\r\n            title: e.target.value\r\n        })\r\n    }\r\n    changeDescription = (e) => {\r\n        this.setState({\r\n            description: e.target.value\r\n        })\r\n    }\r\n    deleteDate(){\r\n        this.setState({\r\n            due_at: null\r\n        })\r\n    }\r\n    render(){\r\n    \r\n        const todo = this.state.title ? (\r\n            <div>\r\n                <div className=\"section\">\r\n                <Link to={\"/todos/\"}><i className=\"medium material-icons grey-text left\">arrow_back</i></Link> \r\n                </div>\r\n                <div className=\"container\">\r\n            \r\n                    <div className=\"row\">\r\n                        <form className=\"col s12\" onSubmit={this.editTodo}>\r\n                        <h4 className=\"center\">Todo Item</h4>\r\n                        <div className=\"row\">\r\n                            <div className=\"input-field col s12\">\r\n                            <input id=\"title\" type=\"text\" className=\"validate\" onChange={this.changeTitle} value={this.state.title} />\r\n                            <label htmlFor=\"title\" className=\"active\">Title</label>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <div className=\"input-field col s12\">\r\n                            <input id=\"description\" type=\"text\" className=\"validate\" onChange={this.changeDescription} value={this.state.description ? this.state.description : \"\" }/>\r\n                            <label htmlFor=\"description\" className={ this.state.description ? \"active\" : \"\" }>Description</label>\r\n                            </div>\r\n                        </div>\r\n                    \r\n                        <div className=\"row\">\r\n                            <div className=\"input-field col s12\">\r\n                                <DatePicker\r\n                                    selected={this.state.due_at ? new Date(this.state.due_at) : \"\" }\r\n                                    onChange={date => this.changeDate(date)}\r\n                                    // customInput={<ExampleCustomInput />}\r\n                                    showTimeSelect\r\n                                    timeFormat=\"HH:mm\"\r\n                                    timeIntervals={30}\r\n                                    timeCaption=\"time\"\r\n                                    dateFormat=\"MMMM d, yyyy h:mm aa\"\r\n                                    placeholderText=\"Add date/time\"\r\n                                    />\r\n                                {this.state.due_at ? <i className=\"deletedate-btn small material-icons prefix red-text text-lighten-2 \" onClick={() => this.deleteDate()}>close</i> : \"\" } \r\n                                    \r\n                            </div>\r\n                        </div>\r\n                        <button className=\"btn waves-effect waves-light\" onClick={this.editTodo}>Update\r\n                            <i className=\"material-icons right\"></i>\r\n                        </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        \r\n        )\r\n        :\r\n        (<div className=\"center\">Loading post...</div>)\r\n\r\n        return (\r\n            <div className=\"container\">\r\n               {todo}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        token: state.token\r\n    }\r\n  }\r\n  \r\n  export default connect(mapStateToProps)(EditTodo)\r\n"]},"metadata":{},"sourceType":"module"}